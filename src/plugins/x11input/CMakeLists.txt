SET(
	SGE_X11INPUT_FILES
	src/plugins/x11input/color.hpp
	src/plugins/x11input/cursor/button_code.hpp
	src/plugins/x11input/cursor/confine.hpp
	src/plugins/x11input/cursor/confine_fwd.hpp
	src/plugins/x11input/cursor/confine_unique_ptr.hpp
	src/plugins/x11input/cursor/create_confine.hpp
	src/plugins/x11input/cursor/define.hpp
	src/plugins/x11input/cursor/define_fwd.hpp
	src/plugins/x11input/cursor/grab/core.hpp
	src/plugins/x11input/cursor/grab/function.hpp
	src/plugins/x11input/cursor/grab/handle.hpp
	src/plugins/x11input/cursor/grab/return_value.hpp
	src/plugins/x11input/cursor/grab/return_value_set.hpp
	src/plugins/x11input/cursor/grab/src/core.cpp
	src/plugins/x11input/cursor/grab/src/handle.cpp
	src/plugins/x11input/cursor/grab/src/xi2.cpp
	src/plugins/x11input/cursor/grab/xi2.hpp
	src/plugins/x11input/cursor/object.hpp
	src/plugins/x11input/cursor/object_fwd.hpp
	src/plugins/x11input/cursor/object_ptr.hpp
	src/plugins/x11input/cursor/pixmap.hpp
	src/plugins/x11input/cursor/pixmap_fwd.hpp
	src/plugins/x11input/cursor/query_pointer.hpp
	src/plugins/x11input/cursor/src/button_code.cpp
	src/plugins/x11input/cursor/src/confine.cpp
	src/plugins/x11input/cursor/src/create_confine.cpp
	src/plugins/x11input/cursor/src/define.cpp
	src/plugins/x11input/cursor/src/object.cpp
	src/plugins/x11input/cursor/src/pixmap.cpp
	src/plugins/x11input/cursor/src/query_pointer.cpp
	src/plugins/x11input/device/event.hpp
	src/plugins/x11input/device/event_data.hpp
	src/plugins/x11input/device/event_demuxer.hpp
	src/plugins/x11input/device/event_demuxer_fwd.hpp
	src/plugins/x11input/device/event_fwd.hpp
	src/plugins/x11input/device/hierarchy_demuxer.hpp
	src/plugins/x11input/device/hierarchy_demuxer_fwd.hpp
	src/plugins/x11input/device/hierarchy_event.hpp
	src/plugins/x11input/device/hierarchy_event_fwd.hpp
	src/plugins/x11input/device/id.hpp
	src/plugins/x11input/device/info.hpp
	src/plugins/x11input/device/object.hpp
	src/plugins/x11input/device/object_fwd.hpp
	src/plugins/x11input/device/object_ptr.hpp
	src/plugins/x11input/device/parameters.hpp
	src/plugins/x11input/device/parameters_fwd.hpp
	src/plugins/x11input/device/raw_demuxer.hpp
	src/plugins/x11input/device/raw_demuxer_fwd.hpp
	src/plugins/x11input/device/raw_event.hpp
	src/plugins/x11input/device/raw_event_fwd.hpp
	src/plugins/x11input/device/select_events.hpp
	src/plugins/x11input/device/src/event.cpp
	src/plugins/x11input/device/src/event_data.cpp
	src/plugins/x11input/device/src/event_demuxer.cpp
	src/plugins/x11input/device/src/info.cpp
	src/plugins/x11input/device/src/object.cpp
	src/plugins/x11input/device/src/parameters.cpp
	src/plugins/x11input/device/src/select_events.cpp
	src/plugins/x11input/device/window_demuxer.hpp
	src/plugins/x11input/device/window_demuxer_fwd.hpp
	src/plugins/x11input/device/window_event.hpp
	src/plugins/x11input/device/window_event_fwd.hpp
	src/plugins/x11input/input_context.hpp
	src/plugins/x11input/input_context_fwd.hpp
	src/plugins/x11input/input_method.hpp
	src/plugins/x11input/input_method_fwd.hpp
	src/plugins/x11input/keyboard/char_vector.hpp
	src/plugins/x11input/keyboard/device.hpp
	src/plugins/x11input/keyboard/device_fwd.hpp
	src/plugins/x11input/keyboard/device_ptr.hpp
	src/plugins/x11input/keyboard/fake_core_event.hpp
	src/plugins/x11input/keyboard/key_code_to_key_sym.hpp
	src/plugins/x11input/keyboard/looked_up_string.hpp
	src/plugins/x11input/keyboard/looked_up_string_fwd.hpp
	src/plugins/x11input/keyboard/lookup_string.hpp
	src/plugins/x11input/keyboard/src/device.cpp
	src/plugins/x11input/keyboard/src/fake_core_event.cpp
	src/plugins/x11input/keyboard/src/key_code_to_key_sym.cpp
	src/plugins/x11input/keyboard/src/looked_up_string.cpp
	src/plugins/x11input/keyboard/src/lookup_string.cpp
	src/plugins/x11input/keyboard/src/to_base_event.cpp
	src/plugins/x11input/keyboard/src/translate_event.cpp
	src/plugins/x11input/keyboard/src/translate_key_code.cpp
	src/plugins/x11input/keyboard/to_base_event.hpp
	src/plugins/x11input/keyboard/translate_event.hpp
	src/plugins/x11input/keyboard/translate_key_code.hpp
	src/plugins/x11input/mouse/axis.hpp
	src/plugins/x11input/mouse/button_code.hpp
	src/plugins/x11input/mouse/device.hpp
	src/plugins/x11input/mouse/device_fwd.hpp
	src/plugins/x11input/mouse/device_ptr.hpp
	src/plugins/x11input/mouse/src/axis.cpp
	src/plugins/x11input/mouse/src/button_code.cpp
	src/plugins/x11input/mouse/src/device.cpp
	src/plugins/x11input/optional_opcode.hpp
	src/plugins/x11input/pixmap.hpp
	src/plugins/x11input/processor.hpp
	src/plugins/x11input/scoped_locale.hpp
	src/plugins/x11input/setlocale.hpp
	src/plugins/x11input/src/color.cpp
	src/plugins/x11input/src/exports.cpp
	src/plugins/x11input/src/input_context.cpp
	src/plugins/x11input/src/input_method.cpp
	src/plugins/x11input/src/pixmap.cpp
	src/plugins/x11input/src/processor.cpp
	src/plugins/x11input/src/scoped_locale.cpp
	src/plugins/x11input/src/setlocale.cpp
	src/plugins/x11input/src/system.cpp
	src/plugins/x11input/src/xi_opcode.cpp
	src/plugins/x11input/src/xi_version.cpp
	src/plugins/x11input/system.hpp
	src/plugins/x11input/xi_opcode.hpp
	src/plugins/x11input/xi_version.hpp
)

INCLUDE(
	CheckCXXSourceRuns
)

INCLUDE_DIRECTORIES(
	${X11_X11_INCLUDE_PATH}
)

SET(
	CMAKE_REQUIRED_INCLUDES ${X11_Xinput_INCLUDE_PATH}
)

CHECK_CXX_SOURCE_RUNS(
	"#include <X11/extensions/XI2.h>
	#include <cstdlib>
	int main()
	{
		return
			XInput_2_1 == 8
			?
				EXIT_SUCCESS
			:
				EXIT_FAILURE
			;
	}"
	SGE_X11INPUT_HAVE_XI_2_1
)

CONFIGURE_FILE(
	${CMAKE_CURRENT_SOURCE_DIR}/config.hpp.in
	${CMAKE_CURRENT_BINARY_DIR}/include/sge/x11input/config.hpp
)

INCLUDE_DIRECTORIES(
	${CMAKE_CURRENT_BINARY_DIR}/include
)

INCLUDE_DIRECTORIES(
	${X11_Xinput_INCLUDE_PATH}
)

ADD_SGE_PLUGIN(
	x11input
	"sgetime;${X11_X11_LIB};${X11_Xinput_LIB}"
)
