set(
	SGE_PLUGIN_FILES
	include/sge/plugin/cache.hpp
	include/sge/plugin/cache_fwd.hpp
	include/sge/plugin/capabilities.hpp
	include/sge/plugin/capabilities_field.hpp
	include/sge/plugin/capabilities_field_fwd.hpp
	include/sge/plugin/category_array.hpp
	include/sge/plugin/collection.hpp
	include/sge/plugin/collection_fwd.hpp
	include/sge/plugin/context.hpp
	include/sge/plugin/context_base_fwd.hpp
	include/sge/plugin/context_fwd.hpp
	include/sge/plugin/description.hpp
	include/sge/plugin/detail/address_name.hpp
	include/sge/plugin/detail/iterator_base_type.hpp
	include/sge/plugin/detail/traits.hpp
	include/sge/plugin/exception.hpp
	include/sge/plugin/file_extension.hpp
	include/sge/plugin/flags.hpp
	include/sge/plugin/flags_field.hpp
	include/sge/plugin/flags_field_fwd.hpp
	include/sge/plugin/info.hpp
	include/sge/plugin/info_fwd.hpp
	include/sge/plugin/iterator.hpp
	include/sge/plugin/iterator_fwd.hpp
	include/sge/plugin/library/detail/interface_post.hpp
	include/sge/plugin/library/detail/interface_pre.hpp
	include/sge/plugin/library/detail/iterate_functions.hpp
	include/sge/plugin/library/detail/version_function_name.hpp
	include/sge/plugin/library/exception.hpp
	include/sge/plugin/library/function_base.hpp
	include/sge/plugin/library/function_map.hpp
	include/sge/plugin/library/make_interface.hpp
	include/sge/plugin/library/object_fwd.hpp
	include/sge/plugin/library/object_shared_ptr.hpp
	include/sge/plugin/library/symbol_not_found.hpp
	include/sge/plugin/library/symbol_string.hpp
	include/sge/plugin/manager.hpp
	include/sge/plugin/manager_fwd.hpp
	include/sge/plugin/min_core_version.hpp
	include/sge/plugin/name.hpp
	include/sge/plugin/object.hpp
	include/sge/plugin/object_fwd.hpp
	include/sge/plugin/object_scoped_ptr.hpp
	include/sge/plugin/object_shared_ptr.hpp
	include/sge/plugin/object_unique_ptr.hpp
	include/sge/plugin/optional_cache_ref.hpp
	include/sge/plugin/optional_cache_ref_fwd.hpp
	include/sge/plugin/version.hpp
	src/plugin/cache.cpp
	src/plugin/context_base.cpp
	src/plugin/exception.cpp
	src/plugin/file_extension.cpp
	src/plugin/include/sge/src/plugin/address_name.hpp
	src/plugin/include/sge/src/plugin/collection_impl.hpp
	src/plugin/include/sge/src/plugin/context_base.hpp
	src/plugin/include/sge/src/plugin/context_impl.hpp
	src/plugin/include/sge/src/plugin/instantiate_collection.hpp
	src/plugin/include/sge/src/plugin/instantiate_context.hpp
	src/plugin/include/sge/src/plugin/instantiate_iterator.hpp
	src/plugin/include/sge/src/plugin/instantiate_manager.hpp
	src/plugin/include/sge/src/plugin/instantiate_object.hpp
	src/plugin/include/sge/src/plugin/iterator_impl.hpp
	src/plugin/include/sge/src/plugin/library/error.hpp
	src/plugin/include/sge/src/plugin/library/load_function.hpp
	src/plugin/include/sge/src/plugin/library/load_function_base.hpp
	src/plugin/include/sge/src/plugin/library/loaded_symbol.hpp
	src/plugin/include/sge/src/plugin/library/object.hpp
	src/plugin/include/sge/src/plugin/load_info.hpp
	src/plugin/include/sge/src/plugin/manager_impl.hpp
	src/plugin/include/sge/src/plugin/object_impl.hpp
	src/plugin/info.cpp
	src/plugin/library/error.cpp
	src/plugin/library/exception.cpp
	src/plugin/library/function_map.cpp
	src/plugin/library/load_function_base.cpp
	src/plugin/library/object.cpp
	src/plugin/library/symbol_not_found.cpp
	src/plugin/load_info.cpp
	src/plugin/manager.cpp
)

include_directories(
	${CMAKE_CURRENT_SOURCE_DIR}/include
)

sge_generate_instantiate_symbol_header(
	plugin
)

if(
	WIN32
)
	add_definitions(
		${Awl_DEFINITIONS}
	)

	set(
		SGE_PLUGIN_ADDITIONAL_LIBS
		"${Awl_LIBRARIES}"
	)
else()
	find_library(
		POSIX_DL_LIBRARY
		NAMES dl
	)

	set(
		SGE_PLUGIN_ADDITIONAL_LIBS
		"${POSIX_DL_LIBRARY}"
	)
endif()

add_sge_base_library(
	plugin
	"sgecore;sgelog"
	"${Fcppt_filesystem_LIBRARIES};${SGE_PLUGIN_ADDITIONAL_LIBS}"
	""
	"${Fcppt_core_LIBRARIES};${Boost_SYSTEM_LIBRARIES}"
)
