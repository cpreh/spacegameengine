set(
	SGE_IMAGE_FILES
	include/sge/image/algorithm/clone.hpp
	include/sge/image/algorithm/compare.hpp
	include/sge/image/algorithm/copy.hpp
	include/sge/image/algorithm/copy_and_convert.hpp
	include/sge/image/algorithm/fill.hpp
	include/sge/image/algorithm/invalid_copy.hpp
	include/sge/image/algorithm/may_overlap.hpp
	include/sge/image/algorithm/may_overlap_fwd.hpp
	include/sge/image/algorithm/print.hpp
	include/sge/image/algorithm/uninitialized.hpp
	include/sge/image/algorithm/uninitialized_fwd.hpp
	include/sge/image/box.hpp
	include/sge/image/box_fwd.hpp
	include/sge/image/channel16.hpp
	include/sge/image/channel32.hpp
	include/sge/image/channel32f.hpp
	include/sge/image/channel8.hpp
	include/sge/image/const_raw_pointer.hpp
	include/sge/image/difference_type.hpp
	include/sge/image/dim.hpp
	include/sge/image/dim_fwd.hpp
	include/sge/image/exception.hpp
	include/sge/image/exception_fwd.hpp
	include/sge/image/format_static.hpp
	include/sge/image/heterogenous_format.hpp
	include/sge/image/homogenous_format.hpp
	include/sge/image/integral_size.hpp
	include/sge/image/invalid_convert.hpp
	include/sge/image/mizuiro_color.hpp
	include/sge/image/mizuiro_color_fwd.hpp
	include/sge/image/mizuiro_color_traits.hpp
	include/sge/image/pitch.hpp
	include/sge/image/pitch_fwd.hpp
	include/sge/image/raw_pointer.hpp
	include/sge/image/raw_value.hpp
	include/sge/image/size_type.hpp
	include/sge/image/traits/any_object_fwd.hpp
	include/sge/image/traits/box_fwd.hpp
	include/sge/image/traits/color_tag.hpp
	include/sge/image/traits/const_view_fwd.hpp
	include/sge/image/traits/dim_fwd.hpp
	include/sge/image/traits/format_fwd.hpp
	include/sge/image/traits/format_is_ref.hpp
	include/sge/image/traits/format_static.hpp
	include/sge/image/traits/format_stride.hpp
	include/sge/image/traits/format_to_string.hpp
	include/sge/image/traits/pitch_fwd.hpp
	include/sge/image/traits/store_fwd.hpp
	include/sge/image/traits/sub_out_of_range.hpp
	include/sge/image/traits/view_elements.hpp
	include/sge/image/traits/view_fwd.hpp
	include/sge/image/transform_elements.hpp
	include/sge/image/vector.hpp
	include/sge/image/vector_fwd.hpp
	include/sge/image/view/basic_format.hpp
	include/sge/image/view/checked_sub.hpp
	include/sge/image/view/const_object.hpp
	include/sge/image/view/const_object_fwd.hpp
	include/sge/image/view/data.hpp
	include/sge/image/view/element_base.hpp
	include/sge/image/view/flipped.hpp
	include/sge/image/view/format.hpp
	include/sge/image/view/get.hpp
	include/sge/image/view/has_element.hpp
	include/sge/image/view/make.hpp
	include/sge/image/view/make_const.hpp
	include/sge/image/view/make_mizuiro_type.hpp
	include/sge/image/view/mizuiro_access.hpp
	include/sge/image/view/mizuiro_traits.hpp
	include/sge/image/view/mizuiro_type.hpp
	include/sge/image/view/object.hpp
	include/sge/image/view/object_fwd.hpp
	include/sge/image/view/pitch.hpp
	include/sge/image/view/size.hpp
	include/sge/image/view/sub.hpp
	include/sge/image/view/sub_out_of_range.hpp
	include/sge/image/view/to_const.hpp
	include/sge/image/view/wrap.hpp
	include/sge/image/view/wrapped_type.hpp
	src/image/algorithm/convert_may_overlap.cpp
	src/image/algorithm/convert_uninitialized.cpp
	src/image/exception.cpp
	src/image/include/sge/src/image/algorithm/clone_impl.hpp
	src/image/include/sge/src/image/algorithm/compare_element.hpp
	src/image/include/sge/src/image/algorithm/compare_impl.hpp
	src/image/include/sge/src/image/algorithm/compare_visitor.hpp
	src/image/include/sge/src/image/algorithm/convert_may_overlap.hpp
	src/image/include/sge/src/image/algorithm/convert_uninitialized.hpp
	src/image/include/sge/src/image/algorithm/copy_and_convert_dynamic.hpp
	src/image/include/sge/src/image/algorithm/copy_and_convert_impl.hpp
	src/image/include/sge/src/image/algorithm/copy_and_convert_static.hpp
	src/image/include/sge/src/image/algorithm/copy_impl.hpp
	src/image/include/sge/src/image/algorithm/fill_impl.hpp
	src/image/include/sge/src/image/algorithm/instantiate_clone.hpp
	src/image/include/sge/src/image/algorithm/instantiate_compare.hpp
	src/image/include/sge/src/image/algorithm/instantiate_copy.hpp
	src/image/include/sge/src/image/algorithm/instantiate_copy_and_convert.hpp
	src/image/include/sge/src/image/algorithm/instantiate_fill.hpp
	src/image/include/sge/src/image/algorithm/instantiate_invalid_copy.hpp
	src/image/include/sge/src/image/algorithm/instantiate_print.hpp
	src/image/include/sge/src/image/algorithm/invalid_copy_impl.hpp
	src/image/include/sge/src/image/algorithm/print_impl.hpp
	src/image/include/sge/src/image/from_mizuiro_dim.hpp
	src/image/include/sge/src/image/instantiate_invalid_convert.hpp
	src/image/include/sge/src/image/invalid_convert_impl.hpp
	src/image/include/sge/src/image/store/basic_impl.hpp
	src/image/include/sge/src/image/store/instantiate_basic.hpp
	src/image/include/sge/src/image/store/instantiate_object.hpp
	src/image/include/sge/src/image/store/instantiate_object_ctor.hpp
	src/image/include/sge/src/image/store/instantiate_view.hpp
	src/image/include/sge/src/image/store/object_impl.hpp
	src/image/include/sge/src/image/store/view_any.hpp
	src/image/include/sge/src/image/store/view_impl.hpp
	src/image/include/sge/src/image/to_mizuiro_dim.hpp
	src/image/include/sge/src/image/traits/dynamic_copy_and_convert.hpp
	src/image/include/sge/src/image/traits/static_converter.hpp
	src/image/include/sge/src/image/view/checked_sub_any.hpp
	src/image/include/sge/src/image/view/checked_sub_condition.hpp
	src/image/include/sge/src/image/view/checked_sub_impl.hpp
	src/image/include/sge/src/image/view/const_object_impl.hpp
	src/image/include/sge/src/image/view/data_any.hpp
	src/image/include/sge/src/image/view/data_impl.hpp
	src/image/include/sge/src/image/view/flipped_any.hpp
	src/image/include/sge/src/image/view/flipped_impl.hpp
	src/image/include/sge/src/image/view/format_any.hpp
	src/image/include/sge/src/image/view/format_impl.hpp
	src/image/include/sge/src/image/view/format_macro.hpp
	src/image/include/sge/src/image/view/format_type.hpp
	src/image/include/sge/src/image/view/get_any.hpp
	src/image/include/sge/src/image/view/get_impl.hpp
	src/image/include/sge/src/image/view/instantiate_checked_sub.hpp
	src/image/include/sge/src/image/view/instantiate_const_nonconst.hpp
	src/image/include/sge/src/image/view/instantiate_const_object.hpp
	src/image/include/sge/src/image/view/instantiate_const_object_ctor.hpp
	src/image/include/sge/src/image/view/instantiate_data.hpp
	src/image/include/sge/src/image/view/instantiate_flipped.hpp
	src/image/include/sge/src/image/view/instantiate_format.hpp
	src/image/include/sge/src/image/view/instantiate_get.hpp
	src/image/include/sge/src/image/view/instantiate_make.hpp
	src/image/include/sge/src/image/view/instantiate_make_const.hpp
	src/image/include/sge/src/image/view/instantiate_object.hpp
	src/image/include/sge/src/image/view/instantiate_object_ctor.hpp
	src/image/include/sge/src/image/view/instantiate_pitch.hpp
	src/image/include/sge/src/image/view/instantiate_size.hpp
	src/image/include/sge/src/image/view/instantiate_sub.hpp
	src/image/include/sge/src/image/view/instantiate_sub_out_of_range.hpp
	src/image/include/sge/src/image/view/instantiate_to_const.hpp
	src/image/include/sge/src/image/view/make_const_impl.hpp
	src/image/include/sge/src/image/view/make_impl.hpp
	src/image/include/sge/src/image/view/object_impl.hpp
	src/image/include/sge/src/image/view/pitch_any.hpp
	src/image/include/sge/src/image/view/pitch_impl.hpp
	src/image/include/sge/src/image/view/size_any.hpp
	src/image/include/sge/src/image/view/size_impl.hpp
	src/image/include/sge/src/image/view/sub_any.hpp
	src/image/include/sge/src/image/view/sub_impl.hpp
	src/image/include/sge/src/image/view/sub_out_of_range_impl.hpp
	src/image/include/sge/src/image/view/to_const_impl.hpp
)

find_package(
	mizuiro
	REQUIRED
)

option(
	ENABLE_STATIC_COPY_AND_CONVERT
	"Use static copy and convert which will produce bigger but probably faster code"
	OFF
)

if(
	ENABLE_STATIC_COPY_AND_CONVERT
)
	SET(
		SGE_IMAGE_STATIC_COPY_AND_CONVERT
		TRUE
	)
endif()

configure_file(
	${CMAKE_CURRENT_SOURCE_DIR}/config.hpp.in
	${CMAKE_CURRENT_BINARY_DIR}/include/sge/src/image/config.hpp
)

sge_generate_instantiate_symbol_header(
	image
)

add_sge_base_library(
	image
	SGE_DEPS
		sgecore
	ADDITIONAL_DEPS
		${fcppt_core_TARGET}
		${fcppt_filesystem_TARGET}
	TRANSITIVE_SGE_DEPS
		sgecore
	TRANSITIVE_ADDITIONAL_DEPS
		${fcppt_filesystem_TARGET}
	INCLUDE_DIRS
		"${CMAKE_CURRENT_SOURCE_DIR}/include"
		"${CMAKE_CURRENT_BINARY_DIR}/include"
		"${mizuiro_INCLUDE_DIRS}"
	TRANSITIVE_INCLUDE_DIRS
		"${fcppt_INCLUDE_DIRS}"
		"${mizuiro_INCLUDE_DIRS}"
)
